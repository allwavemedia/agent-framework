# Story 3.3: Implement Code-to-Visual Synchronization

## Status: Draft

## Story
As a user, when I edit the Python code, I want the visual diagram to update automatically. (FR7)

## Acceptance Criteria
1. Debounce mechanism detects when user stops typing.
2. Code sent to backend endpoint POST /api/sync/code-to-visual.
3. Backend parses code, builds workflow graph, generates Mermaid definition.
4. New definition sent to frontend and visualizer re-rendered.
5. Update cycle averages <400ms, stays <500ms p95.
6. Profiling toggle logs timings when PERF_DEBUG=1.
7. Document scaling test scenario (50 nodes, latency baseline).

## Dev Notes
- Implement debounce for code editor.
- Backend endpoint for code-to-visual sync.
- Measure and log performance.

## Tasks / Subtasks
- [ ] Implement debounce in code editor.
- [ ] Create POST /api/sync/code-to-visual endpoint.
- [ ] Backend parses code and generates Mermaid.
- [ ] Send new definition to frontend and re-render.
- [ ] Implement profiling and scaling test docs.

## Project Structure Notes
- Backend: `apps/backend/app/`
- Frontend: `apps/frontend/src/`
- Update OpenAPI docs and README.

## Testing
- Backend: pytest for sync logic.
- Frontend: Vitest + React Testing Library for sync events.
- Performance: Automated latency test.

## QA Results

## File List

## Dev Agent Record
- Agent Model Used:
- Debug Log References:
- Completion Notes List:
- Change Log:
