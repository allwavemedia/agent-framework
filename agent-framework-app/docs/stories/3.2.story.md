# Story 3.2: Implement Visual-to-Code Synchronization

## Status: Draft

## Story
As a user, when I modify the diagram, I want the Python code to update automatically. (FR5)

## Acceptance Criteria
1. Visual change triggers event.
2. Event sends structured change to backend endpoint POST /api/sync/visual-to-code.
3. Backend updates workflow graph and regenerates Python code.
4. Updated code sent to frontend and displayed in editor.
5. Round-trip completes in <500ms (NFR1).
6. Performance test measures latency for 10 node adds (<500ms p95).
7. Logging captures processing phases for latency analysis.

## Dev Notes
- Implement event system for diagram changes.
- Backend endpoint for visual-to-code sync.
- Measure and log performance.

## Tasks / Subtasks
- [ ] Implement event system for diagram changes.
- [ ] Create POST /api/sync/visual-to-code endpoint.
- [ ] Backend updates graph and code.
- [ ] Send updated code to frontend.
- [ ] Implement performance test and logging.

## Project Structure Notes
- Backend: `apps/backend/app/`
- Frontend: `apps/frontend/src/`
- Update OpenAPI docs and README.

## Testing
- Backend: pytest for sync logic.
- Frontend: Vitest + React Testing Library for sync events.
- Performance: Automated latency test.

## QA Results

## File List

## Dev Agent Record
- Agent Model Used:
- Debug Log References:
- Completion Notes List:
- Change Log:
